{% extends 'base.html' %}
{% block content %}
<div class="container py-4" style="max-width: 800px;">
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h3 class="text-primary">{{ exercicio.titulo }}</h3>
      <p class="text-muted">{{ exercicio.descricao }}</p>
    </div>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="text-secondary mb-3">Enviar Solução</h5>
      <form method="POST">
        <div class="mb-3">
          <textarea class="form-control font-monospace" name="codigo" rows="10" placeholder="Cole seu código aqui..." required></textarea>
        </div>
        <button type="submit" class="btn btn-success">Enviar Código</button>
      </form>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="text-secondary mb-3">Submissões anteriores</h5>
      {% if submissoes %}
        <ul class="list-group list-group-flush">
          {% for s in submissoes %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ s.created_at.strftime('%d/%m/%Y %H:%M') }}</strong><br>
              <small>Status: <span class="text-primary">{{ s.status }}</span></small><br>
              <small>Nota: {{ s.nota or 'Sem nota' }}</small>
            </div>
            {% if current_user.role in ['admin', 'colaborador'] %}
            <a href="{{ url_for('exercicio.editar_submissao', id=s.id) }}" class="btn btn-outline-primary btn-sm">Editar</a>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted">Nenhuma submissão encontrada.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
