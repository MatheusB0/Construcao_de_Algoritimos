{% extends 'base.html' %}
{% block content %}
<h4 style="color:var(--roxo)">Exercícios recomendados</h4>

{% if current_user.role in ['admin', 'colaborador'] %}
  {% set exercicios_para_mostrar = exercicios %}
{% else %}
  {% set exercicios_para_mostrar = exercicios|selectattr('tags', 'intersect', current_user.tags)|list %}
{% endif %}

{% if exercicios_para_mostrar %}
  <div class="row g-3 mt-3">
    {% for e in exercicios_para_mostrar %}
      <div class="col-md-6">
        <div class="card p-3">
          <h5>{{ e.titulo }}</h5>
          <small class="text-muted">{{ e.dificuldade }}</small>
          <p class="mt-2">{{ e.descricao }}</p>
          <small class="text-muted">Autor: {{ e.autor.username if e.autor else '—' }}</small>
          <div class="mt-2">
            <a href="{{ url_for('exercicio.view_exercicio', id=e.id) }}" class="btn btn-sm btn-primary">
              Ver / Submeter
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">Nenhum exercício disponível para suas dificuldades.</p>
{% endif %}
{% endblock %}
